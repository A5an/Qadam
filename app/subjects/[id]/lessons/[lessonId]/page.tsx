'use client'
import React, { useEffect, useState } from 'react'
import { useParams } from 'next/navigation'
import { Card, CardHeader, CardTitle, CardContent, CardDescription } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import Link from 'next/link'

interface LessonContent {
  id: string;
  title: string;
  description: string;
  theory: string;
  examples: string[];
}

const lessonsData: LessonContent[] = [
  {
    id: "1",
    title: "Основные тригонометрические функции",
    description: "Изучение синуса, косинуса и тангенса",
    theory: `
    Тригонометрические функции - это фундаментальные математические функции, которые связывают углы треугольника с отношениями его сторон. Они имеют широкое применение в различных областях науки и техники.

    1. Синус (sin θ):
       Определение: Отношение противолежащего катета к гипотенузе в прямоугольном треугольнике.
       Формула: sin θ = противолежащий катет / гипотенуза
       Диапазон значений: от -1 до 1
       Периодичность: 2π (360°)

    2. Косинус (cos θ):
       Определение: Отношение прилежащего катета к гипотенузе в прямоугольном треугольнике.
       Формула: cos θ = прилежащий катет / гипотенуза
       Диапазон значений: от -1 до 1
       Периодичность: 2π (360°)

    3. Тангенс (tan θ):
       Определение: Отношение противолежащего катета к прилежащему или отношение синуса к косинусу.
       Формула: tan θ = противолежащий катет / прилежащий катет = sin θ / cos θ
       Диапазон значений: все действительные числа
       Периодичность: π (180°)

    Эти функции тесно связаны между собой и имеют множество важных свойств и соотношений, которые мы будем изучать в последующих уроках.
    `,
    examples: [
      "В равностороннем треугольнике со стороной 1, высота h = √3/2. Это значение sin 60°.",
      "Косинус 45° равен 1/√2 ≈ 0.707. Это следует из равенства катетов в равнобедренном прямоугольном треугольнике.",
      "Тангенс угла в 30° равен 1/√3 ≈ 0.577. Это отношение противолежащего катета (1/2) к прилежащему (√3/2) в 30-60-90 треугольнике."
    ]
  },
  {
    id: "2",
    title: "Тригонометрический круг",
    description: "Понимание единичной окружности и радиан",
    theory: `
    Тригонометрический круг, также известный как единичная окружность, - это мощный инструмент для визуализации и понимания тригонометрических функций.

    Основные характеристики:
    1. Радиус круга равен 1, что упрощает вычисления.
    2. Центр круга находится в начале координат (0, 0).
    3. Точка (1, 0) соответствует углу 0°.
    4. Движение против часовой стрелки соответствует положительному направлению угла.

    Радианная мера угла:
    - 1 радиан - это угол, соответствующий дуге, длина которой равна радиусу.
    - Полный оборот (360°) соответствует 2π радианам.
    - π радиан = 180°

    На тригонометрическом круге:
    - sin θ = y-координата точки на круге
    - cos θ = x-координата точки на круге
    - tan θ = y/x (отношение синуса к косинусу)

    Это определение позволяет расширить понятие тригонометрических функций на любые углы, а не только на острые углы в прямоугольном треугольнике.
    `,
    examples: [
      "Угол 90° соответствует π/2 радиан. В этой точке sin 90° = 1, cos 90° = 0.",
      "Для угла 60° (π/3 радиан) координаты точки на круге: (1/2, √3/2). Это значения cos 60° и sin 60° соответственно.",
      "Тангенс угла 45° (π/4 радиан) равен 1, так как в этой точке y = x."
    ]
  },
  {
    id: "3",
    title: "Тригонометрические тождества",
    description: "Основные тождества и формулы сложения",
    theory: `
    Тригонометрические тождества - это равенства, содержащие тригонометрические функции, которые верны для всех допустимых значений переменных. Они играют ключевую роль в упрощении выражений и решении уравнений.

    Основные тождества:
    1. Пифагорово тождество: sin²θ + cos²θ = 1
       Это фундаментальное тождество вытекает из теоремы Пифагора в единичном круге.

    2. Тождества отношений:
       tan θ = sin θ / cos θ
       cot θ = cos θ / sin θ = 1 / tan θ
       sec θ = 1 / cos θ
       csc θ = 1 / sin θ

    Формулы сложения:
    1. sin(A + B) = sin A cos B + cos A sin B
    2. cos(A + B) = cos A cos B - sin A sin B
    3. tan(A + B) = (tan A + tan B) / (1 - tan A tan B)

    Эти формулы позволяют выразить тригонометрические функции суммы углов через функции отдельных углов и являются основой для вывода многих других тождеств.

    Важность тригонометрических тождеств:
    - Упрощение сложных выражений
    - Решение тригонометрических уравнений и неравенств
    - Доказательство теорем в геометрии и анализе
    - Применение в физике и инженерии
    `,
    examples: [
      "Используя Пифагорово тождество, можно найти cos θ, зная sin θ: если sin θ = 3/5, то cos θ = ±√(1 - (3/5)²) = ±4/5.",
      "Формула синуса суммы углов позволяет вычислить sin 75°: sin 75° = sin(45° + 30°) = sin 45° cos 30° + cos 45° sin 30° = (√2/2)(√3/2) + (√2/2)(1/2) = (√6 + √2)/4.",
      "Тождество tan θ = sin θ / cos θ используется для упрощения выражений. Например, (sin x + cos x) / (sin x - cos x) = (1 + cot x) / (1 - cot x)."
    ]
  }
];

export default function LessonPage() {
  const params = useParams();
  const subjectId = params.id as string;
  const lessonId = params.lessonId as string;
  const [lessonContent, setLessonContent] = useState<LessonContent | null>(null);

  useEffect(() => {
    // Имитация загрузки данных
    const lesson = lessonsData.find(l => l.id === lessonId);
    if (lesson) {
      setLessonContent(lesson);
    }
  }, [lessonId]);

  if (!lessonContent) {
    return <div>Загрузка...</div>;
  }

  return (
    <div className="min-h-screen p-4 bg-background text-foreground dark">
      <div className="flex justify-between items-center mb-4">
        <Link href={`/subjects/${subjectId}`}>
          <Button variant="outline">← Назад к урокам</Button>
        </Link>
      </div>
     
      <Card className="mb-6">
        <CardHeader>
          <CardTitle>Урок {lessonContent.id}: {lessonContent.title}</CardTitle>
          <CardDescription>{lessonContent.description}</CardDescription>
        </CardHeader>
        <CardContent>
          <h3 className="text-lg font-semibold mb-2">Теория:</h3>
          <p className="whitespace-pre-line mb-4">{lessonContent.theory}</p>
          <h3 className="text-lg font-semibold mb-2">Примеры:</h3>
          <ul className="list-disc pl-5">
            {lessonContent.examples.map((example, index) => (
              <li key={index} className="mb-2">{example}</li>
            ))}
          </ul>
        </CardContent>
      </Card>
    </div>
  );
}